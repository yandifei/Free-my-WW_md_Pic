# <center>独立4C模块开发</center>

# 核心亮点
开发这个是为了刷去最新的boss声骇，包括以后新出的boss都可以直接使用这个功能刷取，简单来讲就是预测未来鸣潮的boss所有特征点。理论上来讲，这个模式具有超强的前瞻性，可以刷去任何的4C。对于当前急用的就可以直接用，不必等待别人的脚本更新，上线即可刷最新的声骇

**额外亮点(继承)**
1. 这个模块的功能是继承之前战斗体系的，可以有自定义战斗模式
2. 继承声骇拾取，自定义参数变化，通过输入框改变UI减低声骇吸收失败概率
# 局限性
1. 因为是预测，所以必然会出现预测的错误。基于过往对未来的预测，鸣潮的脚本战斗体系是我研究过最长的了，预测失误只有可能是鸣潮大动UI和战斗底层大改动。
2. 仅仅会刷单独的boss，不能交替其他boss，4C有2分钟的冷却时间。只能用借位信标
3. 队伍角色不能存在角色死亡后去其他锚点复活，我的Free my WW是可以不用带任何加血的，角色死亡会自动处理。但是这个模块因为具有前瞻性，为了保证稳定性，我去除了对角色死亡传送的预测。后果就是角色死亡的复活是靠全队死亡来完成的，极大大的浪费时间。
4. 借位信标不能在附近其他位置有重叠，会有误会判(使用信标去到boss位置后，打开地图点击借位信标查看是否有其他的借位信标，如果有请移除不是传送到boss的那一个借位信标)，当前地图界面出现其他借位信标可能会误判（代码处理:由中心开始查找，逐渐扩大范围查找借位信标，降低传送错误的问题）
6. 需要注意的是如果因为声骇拾取或前进等待boss超出一定范围，导致了地图无法正常识别就完了，所以自定义的声骇拾取圈数不能太大
5. 当然，基于未来的预测我考虑到了以后的4C可能会有多血条的声骇boss

***

# 模块开发随笔
今天是2025.1.3文本撰写日和脚本模块开发日
1. 判断是否在大世界或副本
2. 如果在大世界则执行一次传送检测是否能正常传送
3. 如果是在副本内(声之领域)部就重新挑战
## 声骇刷取逻辑和界面反馈
采取顺序逻辑，因为是单个boss所有不存在顺序逻辑，不会持续等待2分钟，他会一直递归传送
## 是传送模块（独立专属）***重点***
1. 考虑是否在副本内还是大世界，检测是否在副本或大世界
2. 如果是在副本里面打完一次就直接重开就可以了
3. 大世界boss打完重新传送(逻辑复杂独立做)

**副本传送初次传送**
调用的是之前的函数，去除了前进按f的内容，避免重复
**大世界boss重新传送**
打开地图点击中心检测图标(这部分代码我把无音区的超了过来)
如果有可以选的其他图标就优先选择借位信标选项传送。检测借位信标要改变搜索方式，从屏幕中间开始搜索，逐渐扩大范围遍历借位信标
如果没有可以选的其他图标
即为快速传送，检测是否是4C的界面快速旅行，如果是则点击快速旅行，否则鼠标点击退出(必须是鼠标，如果不是有可能导致鼠标遮挡了图标)
自己位置的图标有可能遮住借位信标和boss图标，所以优先检测附近的图标
## 击杀模块（继承）
在原来的基础上改变了双检测时间，为的是2条血的周本boss
## 声骇模块（继承）
改变了原来的计数和界面反馈
## 复活模块尝试开发
1. 可以通过检索最近的小型信标或中枢信标复活补血单个角色
2. 如果是全队死亡直接点击复活，注意：区分大世界的全队死亡复活和副本里面的全队死亡复活
3. 死亡传送附近信标，再次打开地图有可能其他界面元素遮住了需要传送信标导致无法回到boss的地点，后续递归传送都将失败，陷入无尽错误传送中

***副本死亡处理***
单个角色死亡：
方案1：检测到单个角色死亡后，退出复活药界面，等待boss把我全部角色打死激活全队复活的界面
方案2：退出副本到最近的传送点复活，再传回副本
**奇葩思路：避免传送锚点回血导致回不去之前的boss位置，直接采用全队死亡来达到全队复活的操作**
切角色吸收声骇的时候
## 优化处理
1. 死亡传送处理
2. 索拉等级处理
3. 修改重新传送矫正的时间
4. 添加自动重启功能
5. 发现bug，借位信标地图图色不对劲，0.9相似度不行了,修复了bug
6. 自定义战斗模式没写
今天是2025.1.4测试完成，大世界ok加上副本ok，副本的复活没有测试

## 迭代
脚本问题还是很多的，比如检测传送失败就是最大的原因